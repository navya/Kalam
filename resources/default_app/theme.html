<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kalam</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/material.min.css">
    <link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="css/alertify.min.css">
    <link rel="stylesheet" href="css/alertify.rtl.min.css">
    <style>
    </style>
  </head>
  <body>
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      <header class="demo-header mdl-layout__header mdl-color--white mdl-color--grey-100 mdl-color-text--grey-600">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title">Select Theme</span>
          <div class="mdl-layout-spacer"></div>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
          </div>
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
          <i class="material-icons">settings</i>
          </button>
          <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
            <li class="mdl-menu__item">About</li>
            <li class="mdl-menu__item">Contact</li>
            <li class="mdl-menu__item">Legal information</li>
          </ul>
        </div>
      </header>
      <div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
        <header class="demo-drawer-header">
          <img src="images/happyjuggling.png" class="demo-avatar">
          <br>
          <div class="demo-avatar-dropdown">
            <span>Welcome </span>&nbsp;<span id="name"> Professor</span>
          </div>
        </header>
        <nav class="demo-navigation mdl-navigation mdl-color--blue-grey-800">
          <a class="mdl-navigation__link" href="create.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">playlist_add</i>Add a Course</a>
          <a class="mdl-navigation__link" href="index.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">dashboard</i>Overview</a>
          <a class="mdl-navigation__link" href="current.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">assignment</i>Current Courses</a>
          <a class="mdl-navigation__link" href="old.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">history</i>Old Courses</a>
          <a class="mdl-navigation__link" href="reminder.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">event</i>Important Reminders</a>
          <a class="mdl-navigation__link" href="theme.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">perm_media</i>Select Theme </a>
          <div class="mdl-layout-spacer"></div>
          <a class="mdl-navigation__link" href="help.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">help_outline</i><span class="visuallyhidden">Help</span></a>
        </nav>
      </div>
      <main class="mdl-layout__content mdl-color--grey-100">
      <div class="mdl-grid demo-content" id="main">
      </div>
      </main>
    </div>
    
    <script src="js/material.min.js"></script>
        <script type="text/javascript">
    window.alertify = require('./js/alertify.min.js')
    </script>
    <script type="text/javascript">
    var fs = require('fs'),
      path = require('path');

    function getDirectories(srcpath) {
      return fs.readdirSync(srcpath).filter(function(file) {
        return fs.statSync(path.join(srcpath, file)).isDirectory();
      });
    }
    var directories = getDirectories(path.join(__dirname, 'themes'))

     str = "";
    for (var i = directories.length - 1; i >= 0; i--) {
      str += '<div class="demo-card-event mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-grid mdl-grid--no-spacing"><div class="mdl-card__title mdl-card--expand">            <h2 class="mdl-card__title-text">' + directories[i] + '</h2></div>          <div class="mdl-card__actions mdl-card--border" style="background-color: white;color: #46B6AC;">            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" style="color: #46B6AC;" onclick=stheme("' + directories[i] + '")>Select theme</a> <div class="mdl-layout-spacer"></div>   <i class="material-icons">open_in_browser</i> </div>  </div>';
    }
    document.getElementById('main').innerHTML = str;

    function stheme(name) {
      fs.exists(path.join(__dirname, 'themes', name, 'settings.json'), function(exists) {
        if (exists) {
          alertify.success('exists.')
          var filename = path.join(__dirname, 'themes', 'settings.json')
          var jsonm = require(filename)
          jsonm.ActiveTheme = name;
          fs.writeFile(filename, JSON.stringify(jsonm), function(err) {
            if (err) {
              alertify.success('Theme not changed')
            } else {
              alertify.success('Theme changed')
            }
          });
        } else {
          alertify.success('Theme installed Incorrectly.')
        }
      });
    }
    </script>
  </body>
</html>